<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">


  <!-- Mapbox CSS -->
  <link href='https://api.mapbox.com/mapbox-gl-js/v2.10.0/mapbox-gl.css' rel='stylesheet' />

  <!-- Custom CSS -->

  <title>Weather API Examples</title>

  <style>
    #map {
      /* the width and height may be set to any size */
      width: 100%;
      height: 500px;
    }
  </style>
</head>
<body>

  <div class="continer">
    <div class="row bg-primary text-light">
      <div class="col-9">
        <h3>Weather App</h3>
      </div>
      <div class="col-3">
        <div class="text-center d-flex justify-content-center align-items-center" id="current-city">Current City: Dallas, TX</div>
      </div>
    </div>
  </div>

  <div class="container mx-0 p-0">
    <div class="mt-4">
      <label class="px-2" for="place">Place</label>
      <input class="mx-4" type="text" id="place" placeholder="Dallas, Tx">
      <button id="find" type="button">Find</button>
    </div>
  </div>

  <div class="container my-4 p-0">
    <div class="d-flex" id="weather-card">
      <div class="card mx-3 p-2">
        <div id="date" class="text-center">2020-04-06</div>
        <div id="temp" class="text-center">75.43 &degF / 75.43 &degF</div>
        <div id="icon" class="text-center">
          <img id="wicon" src="" alt="Weather icon">
        </div>
        <div id="description">Description: overcast clouds</div>
        <div id="humidity">Humidity: 71</div>
        <div id="wind-speed">Wind: 584</div>
        <div id="pressure">Pressure: 1015</div>
      </div>

<!--      <div class="card mx-3">-->
<!--        <div>2020-04-06</div>-->
<!--        <div>75.43 F/ 75.43 F</div>-->
<!--        <div>icon</div>-->
<!--        <div>Description: overcast clouds</div>-->
<!--        <div>Humidity: 71</div>-->
<!--        <div>Wind: 584</div>-->
<!--        <div>Pressure: 1015</div>-->
<!--      </div>-->

<!--      <div class="card mx-3">-->
<!--        <div>2020-04-06</div>-->
<!--        <div>75.43 F/ 75.43 F</div>-->
<!--        <div>icon</div>-->
<!--        <div>Description: overcast clouds</div>-->
<!--        <div>Humidity: 71</div>-->
<!--        <div>Wind: 584</div>-->
<!--        <div>Pressure: 1015</div>-->
<!--      </div>-->

<!--      <div class="card mx-3">-->
<!--        <div>2020-04-06</div>-->
<!--        <div>75.43 F/ 75.43 F</div>-->
<!--        <div>icon</div>-->
<!--        <div>Description: overcast clouds</div>-->
<!--        <div>Humidity: 71</div>-->
<!--        <div>Wind: 584</div>-->
<!--        <div>Pressure: 1015</div>-->
<!--      </div>-->

<!--      <div class="card mx-3">-->
<!--        <div>2020-04-06</div>-->
<!--        <div>75.43 F/ 75.43 F</div>-->
<!--        <div>icon</div>-->
<!--        <div>Description: overcast clouds</div>-->
<!--        <div>Humidity: 71</div>-->
<!--        <div>Wind: 584</div>-->
<!--        <div>Pressure: 1015</div>-->
<!--      </div>-->

<!--      <div class="card mx-3">-->
<!--        <div>2020-04-06</div>-->
<!--        <div>75.43 F/ 75.43 F</div>-->
<!--        <div>icon</div>-->
<!--        <div>Description: overcast clouds</div>-->
<!--        <div>Humidity: 71</div>-->
<!--        <div>Wind: 584</div>-->
<!--        <div>Pressure: 1015</div>-->
<!--      </div>-->

<!--      <div class="card mx-3">-->
<!--        <div>2020-04-06</div>-->
<!--        <div>75.43 F/ 75.43 F</div>-->
<!--        <div>icon</div>-->
<!--        <div>Description: overcast clouds</div>-->
<!--        <div>Humidity: 71</div>-->
<!--        <div>Wind: 584</div>-->
<!--        <div>Pressure: 1015</div>-->
<!--      </div>-->
    </div>




  </div>

  <div class="continer">
    <!-- The HTML element that serves as the Mapbox container -->
    <div class="d-flex align-self-end" id='map'></div>
  </div>

<!-- Mapbox JS -->
<script src='https://api.mapbox.com/mapbox-gl-js/v2.10.0/mapbox-gl.js'></script>

<!--jQuery-->
<script src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>

<!-- Option 1: Bootstrap Bundle with Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

<script src="js/mapbox-geocoder-utils.js"></script>

<script src="js/keys.js"></script>

<script>
  "use strict";

  // 1. Generate a Mapbox API Key using the steps from above
  mapboxgl.accessToken = MAPBOX_TOKEN;

  var map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/mapbox/streets-v9',
    zoom: 11,
    // starting position [lng, lat]
    center: [-96.7970, 32.7767]
  });

  let marker = new mapboxgl.Marker()
          .setLngLat([-96.7970, 32.7767])
          .addTo(map);

  // console.log(map.center[0]);

  $('#find').on('click', function(){

    let findLocation = $('#place').val();

    // Geocoding Example...
    geocode(findLocation, MAPBOX_TOKEN).then(function(data) {
      map.setCenter(data);

      //create an array variable to sore the lon and lat from the data object
      let newLocation = [data]

      //create variables to store the lat and log from the data object individually
      let lon = data[0];
      let lat = data[1];

      //create a marker with the new location information
      let newMarker = new mapboxgl.Marker()
              .setLngLat(newLocation[0])
              .addTo(map);

      // // Reverse Geocoding Example
      reverseGeocode({lng: lon, lat: lat}, MAPBOX_TOKEN).then(function(data) {
        let string = data.split(',');
        // console.log(string);
        // console.log(string[1]);
        let state = string[2];
        let newState = state.split(' ');
        // console.log(newState[1]);

        //update the current city location with the reverseGeocode data
        $('#current-city').text('Current City: ' + string[1] + ', ' + newState[1]);


      });

      $.get('https://api.openweathermap.org/data/2.5/forecast', {
        appid: WEATHER_API_KEY,
        lat: 29.4252,
        lon: -98.4916,
        units: 'imperial'
      }).done(function(data) {
        console.log(data);

        //create a variable array to hold the date and time
        let fullDate = data.list[0].dt_txt.split(' ');

        console.log(fullDate[0]);

        //create a variable to hold the max temp
        let maxTemp = data.list[0].main.temp_max;

        //create a variable to hold the low temp
        let minTemp = data.list[0].main.temp_max;

        //create a variable to hold the humidity
        let humidity = data.list[0].main.humidity;

        //create a variable to hold the humidity
        let pressure = data.list[0].main.pressure;

        //create a variable to hold the description of the data
        let descrip = data.list[0].weather[0].description;
        console.log(data.list[0].weather[0].description);

        //create a variable to hold the humidity
        let wind = data.list[0].wind.speed;

        //create a variable to capture the string information for the icon field
        let iconCode = data.list[0].weather[0].icon;

        console.log(data.list[0].weather[0].icon);

        //create a variable to hold the http reference to openweathermap.org and the icon code
        let iconURL = "http://openweathermap.org/img/w/" + iconCode + ".png";

        $('#date').text(fullDate[0]);
        $('#temp').html(`${maxTemp} &degF / ${minTemp} &degF`);
        $('#wicon').attr('src', iconURL);
        $('#description').html(`Description: ${descrip}`);
        $('#humidity').html(`Humidity: ${humidity}`);
        $('#wind-speed').html(`Wind: ${wind} mph`);
        $('#pressure').html(`Pressure: ${pressure}`);






        // dealing with time
        // convert API date/time response to JS Date Object
        // ... new Date(1629461117 * 1000)
        // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date
        // }).fail(function(error) {
        //   console.log(error);
      });
      // $('h1').text('Map of Whitefish, Montana');
    });

    function weatherData(data)
    {




      let html = '';

      html = '<div class="card mx-3">\n' +
                '<div id="date">2020-04-06</div>\n' +
                '<div id="temp">75.43 F/ 75.43 F</div>\n' +
                '<div id="icon">icon</div>\n' +
                '<div id="description">Description: overcast clouds</div>\n' +
                '<div id="humidity">Humidity: 71</div>\n' +
                '<div id="wind-speed">Wind: 584</div>\n' +
                '<div id="pressure">Pressure: 1015' +
              '</div>';
      return html;
    }




  });





</script>

</body>
</html>
white_check_mark
+1
raised_hands












</html>